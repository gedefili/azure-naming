{
  "metadata": {
    "name": "US key vault overlay",
    "priority": 100,
    "enabled": true,
    "description": "Stricter validation for US-based key vaults. Toggle `enabled` to false to deactivate."
  },
  "resources": {
    "key_vault": {
      "max_length": 24,
      "require_sanmar_prefix": true,
      "segments": [
        "slug",
        "system",
        "subsystem",
        "environment",
        "region",
        "index"
      ],
      "display": [
        { "key": "name", "label": "Key Vault Name", "optional": false },
        { "key": "resourceType", "label": "Resource Type", "optional": false },
        { "key": "slug", "label": "Slug", "optional": false },
        { "key": "environment", "label": "Environment", "optional": false },
        { "key": "region", "label": "Region", "optional": false },
        { "key": "system", "label": "System", "optional": false },
        { "key": "index", "label": "Index" }
      ],
      "name_template": "{region}{environment}{slug}{sanmar_prefix}{system}{subsystem}{index}",
      "summary_template": "Key vault '{name}' for system '{system_upper}' in {environment_upper}-{region_upper}",
      "validators": {
        "allowed_values": {
          "region": ["wus", "wus2", "eus", "eus1"],
          "environment": ["prd", "stg", "tst", "uat", "alt", "dev"]
        },
        "require_any": {
          "system": ["system", "system_short"]
        }
      }
    }
  }
}
